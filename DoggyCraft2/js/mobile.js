Weebly=Weebly||{};Weebly.mobile_navigation=(function($){var isOpen=false,isMoving=false,supportsTouch=false,pendingResizeData=null,isiOS=(navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?true:false),supports3D=('WebKitCSSMatrix'in window&&'m11'in new WebKitCSSMatrix()),supportsTouch=false,menuOffsetY=0,$menuWrapper,$menu,$body,supports3D;var addTransition=function($o,property,speed,cb){if(!speed){speed=500;}
$o.css({webkitTransitionDuration:speed+'ms',webkitTransitionProperty:property,webkitTransitionTimingFunction:'linear'});var onTransistionEnd=function(e){$o.off('webkitTransitionEnd',onTransistionEnd);$o.css({webkitTransitionDuration:'',webkitTransitionProperty:'',webkitTransitionTimingFunction:''});cb();}
$o.on('webkitTransitionEnd',onTransistionEnd);};var animate=function($o,from,to,speed,cb){if(!speed){speed=500;}
if(supports3D){$o.css({webkitTransitionDuration:'0ms'});$o.css(from);setTimeout(function(){addTransition($o,'all',speed,cb);var props={};for(property in to){if(!to.hasOwnProperty(property)){continue;}
props[property]=to[property];}
$o.css(props);},0);}else{to.avoidCSSTransitions=true;$o.animate(to,{duration:speed,complete:cb});}};var menuTap=function(e){var menuHeight='100%',effectStart,effectEnd,fromCSS,toCSS;if(isMoving){return;}
isOpen=!isOpen;isMoving=true;if(isOpen){$body.addClass('menu-open');}
var cb=function(){isMoving=false;if(!isOpen){$body.removeClass('menu-open');}};};var tweenMenu=function($oldSlide,$newSlide,rightToLeft){var $animContainer=$('.wsite-animation-wrap',$menu),sign=(rightToLeft)?1:-1;if(isMoving){return;}
isMoving=true;var menuWidth=$menu.width();var toX=-sign*menuWidth+'px';var fromCSS={'-webkit-transform':'translate3d( 0, 0px, 0)'};var toCSS={'-webkit-transform':'translate3d('+ toX+', 0px, 0)'};if(supports3D){$newSlide.css({'-webkit-transform':'translate3d('+(sign*menuWidth)+'px, 0px, 0)'});}else{$newSlide.css({'left':(sign*menuWidth)+'px'});fromCSS={left:0};toCSS={left:toX};}
$newSlide.show();var cb=function(){$oldSlide.hide();$animContainer.css(fromCSS);$newSlide.css(fromCSS);isMoving=false;};animate($animContainer,fromCSS,toCSS,300,cb);};var addActiveState=function($element,tagName){$element.on('touchstart',tagName,function(ev){$(this).addClass('active');});$element.on('touchend',tagName,function(ev){$(this).removeClass('active');});};var resizeContentWindow=function(){};var resizeMenu=function(){if(!$menu){return;}
var menuHeight=$menu.find('.wsite-menu-slide:visible').outerHeight();if(menuHeight>0){$menu.css({height:'100%','overflow-y':'auto','-webkit-overflow-scrolling':'touch'});}};var initBody=function(){$body=$('body');if(('ontouchstart'in window)||window.DocumentTouch&&document instanceof DocumentTouch){$body.removeClass('no-touch');$body.addClass('touch');supportsTouch=true;}};var initMenu=function(){var $sideMenus=$('#navmobile .wsite-menu-wrap'),$headerUl,$sliderContainer;$headerUl=$('#navmobile .wsite-menu-default');$headerUl.wrap('<div class="wsite-mobile-menu" />');$menu=$headerUl.up('.wsite-mobile-menu');$menuWrapper=$headerUl.up('#wrapper');$menuWrapper=($menuWrapper.length>0)?$menuWrapper:$menu;isOpen=false;isMoving=false;var slideCSS={position:'absolute',top:'0',left:'0',width:'100%',height:'100%'};$headerUl.addClass('wsite-menu-slide').css(slideCSS);$sideMenus.addClass('wsite-menu-slide').css(slideCSS);$headerUl.css({'left':'0'});if(supports3D){$headerUl.css({'-webkit-transform':'translate3d( 0, 0px, 0)'});}
$menu.append('<div class="wsite-animation-wrap"></div>');$sliderContainer=$('.wsite-animation-wrap',$menu);$sliderContainer.css({position:'relative',height:'100%'});if(supports3D){$sliderContainer.css({'-webkit-backface-visibility':'hidden'});}
$sliderContainer.append($headerUl);$sideMenus.each(function(){var $sideMenu=$(this),$parentAnchor=$sideMenu.prev(),$ul=$sideMenu.children('ul'),$previousMenu=$sideMenu.parents('.wsite-menu-slide');var $backLink=$('<li class="wsite-menu-back-item">'+'<a><span class="wsite-menu-mobile-arrow"></span><span class="wsite-menu-back">Back</span></a>'+'</li>');$backLink.unbind("click");$backLink.on('click',function(ev){tweenMenu($sideMenu,$previousMenu,false);return false;});if($parentAnchor.attr("href")){var $sideMenuRoot=$parentAnchor.clone(true,true);var $rootLink=$('<li class="wsite-menu-master-item"></li>').html($sideMenuRoot);}
$ul.prepend($rootLink);$ul.prepend($backLink);$parentAnchor.unbind("click");$parentAnchor.append('<span class="wsite-menu-mobile-arrow"></span>');$parentAnchor.on('click',function(ev){tweenMenu($previousMenu,$sideMenu,true);return false;});$sideMenu.css({'left':'0'});if(supports3D){$sideMenu.css({'-webkit-transform':'translate3d( 0, 0px, 0)'});}
$sliderContainer.append($sideMenu);});$menu.css({'display':'block'});$menuWrapper.css({'display':'block'});resizeMenu();if(supportsTouch){addActiveState($('.wsite-home-link'));addActiveState($menu,'a');}};var closeMenu=function(){if(isOpen){menuTap(null);}};var isMenuOpen=function(){return isOpen;};var init=function(){$body=$('#icontent');$body=($body.length>0)?$body:$('body');if(!$body.hasClass('wsite-render3d')){supports3D=false;}
initMenu();};if(!Weebly.mobile){$(window).on("message",function(event){if(!event.origin||event.origin.indexOf('weebly.com')===-1){return;}
pendingResizeData=event.data;});}
$(function(){setTimeout(function(){initBody();init();},1000);if(window.FastClick){FastClick.attach($('.wsite-mobile-menu')[0]);}});return{init:init,closeMenu:closeMenu,resizeScreen:resizeContentWindow,resizeMenu:resizeMenu,menuTap:menuTap,isMenuOpen:isMenuOpen};}(Weebly.jQuery));